{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block leaderboard-active %} active {% endblock %}

{% block content %}
<section class="page-header">
    <div class="container">
        <h1 class="page-title">
            {% trans "Leaderboard" %}
        </h1>
        <p class="page-subtitle">
            {% trans "Only Turbo matches from the past 180 days contribute to the rating" %}
        </p>
    </div>
</section>

<section class="table-section">
    <div class="container">
        <table class="leaderboard-table">
            <thead>
                <tr>
                    <th>{% trans "Position" %}</th>
                    <th>{% trans "Nickname" %}</th>
                    <th>{% trans "Rating" %}</th>
                </tr>
            </thead>
            <tbody id="leaderboard-body">
            {% for user in page.object_list %}
                {% with position=page.start_index|add:forloop.counter0 %}
                <tr class="
                    {% if position == 1 %}rank-1{% endif %}
                    {% if position == 2 %}rank-2{% endif %}
                    {% if position == 3 %}rank-3{% endif %}
                    {% if request.user.steamid == user.steamid %}user-row{% endif %}
                    ">
                    <td>${renderRank(user.rank)}</td>
                    <td class="{% if user.steamid in friend_ids %}friend-row{% endif %}">
                        {{ user.personaname }}
                    </td>
                    <td class="rating-high">{{ user.total_rating }}</td>
                </tr>
                {% endwith %}
            {% endfor %}
            </tbody>
        </table>
        <div id="my-rank-wrapper" class="my-rank-wrapper hidden">
            <table class="leaderboard-table my-rank-table">
                <tbody>
                    <tr id="my-rank-row">
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div id="leaderboard-sentinel"></div>
    <div id="leaderboard-loader" class="leaderboard-loader hidden">
        {% trans "Loading..." %}
    </div>
</section>
<script src="{% static 'js/leaderboard.js' %}"></script>
{% endblock %}
